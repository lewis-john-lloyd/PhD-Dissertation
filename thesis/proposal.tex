\chapter{Proposed Work}
\label{chap:proposal}
To evaluate the efficacy of an algorithm that employs  spatially selective nonlinear refinement, three objectives will be pursued.
The first will be to examine and modify as necessary the coding of the operator-based scaling for the residuals in order to address the noted convergence issues.
The second objective will be to complete an appropriate scaling of the Newton updates for convergence testing both within the linesearch algorithm and in the Newton loop will be determined.
Lastly, the domain decomposition algorithm will be mathematically developed, coded, and evaluated.
Once the three proceeding objectives have been met, a test problem will be developed to test both the legacy solver and the nonlinear solver with the domain decomposition applied to a predetermined subdomain.
After the algorithmic framework has been evaluated, several geometrically complex problems with a high incidence of local-nonlinearities will be developed to obtain convergence benchmarks for the legacy solver.
The same problems will then be evaluated using the global nonlinear solver to determine the computational run time impact of solving the global nonlinear problem over the whole domain. 
After the two bounding cases, the global legacy solver and the global nonlinear solver, have been run, the solutions will be compared to determine the impact of resolving the nonlinearities upon the accuracy of the transient result.
At that time, the hybrid method will be tested, with regions of high-nonlinearities targeted as predetermined subdomains.
The run-time performance of the hybrid method will be compared to that of the fully nonlinear case and the legacy solver.
Concurrent to the above work, the nonlinear convergence metric will be evaluated to determine its efficacy in detecting a nonlinearly converged solution.
Parametric studies will then be conducted to determine the impact of nonlinear convergence tolerances, phase appearance and disappearance thresholds, and residual thresholds for activation of nonlinear refinements.

\section{Scaling Work}
\label{sect:proposal_scaling}
The current implementation of the operator-based scaling method outlined in \sect{sect:operator_scaling} has several issues that need to be addressed.
The first is that the scaled residual has nontrivial values during the steady state portion of the simulation.
The second issue is the sporadic non-convergence of the nonlinear problem when using the nonlinear solver during simulations where nonlinear physics are not dominant.
It is believed that this behavior may be a result of the choice of phase transition logic for the scaling factor.
Another possibility is the inconsistency between the scaled update vector used in the line-search algorithm and the one used in the Newton loop convergence criteria.
Both avenues of investigation will be pursued to determine the root cause of the aforementioned problems.

Another scaling issues that needs to be addressed is the proper scaling for the Newton update.
The current algorithmic implementation has different convergence criteria for the linesearch step and the Newton step.
The interplay between the globalization termination criteria and the update scaling will be investigated to determine a consistent and effective scaling for the independent parameter update vector. 

\section{Domain Decomposition}
\label{sect:domain_coupling}
The first step of the domain decomposition work will be to develop a variation of the semi-implicit domain coupling algorithm presented in \sect{sect:code_coupling}.
The derivation should take into account the iterative Newton nature of the slave domain. 
In addition, the details of the derivation will need to be reworked to account for the different flow variables in \cobra{}.
Upon implementation of the internal coupling algorithm within \cobra{}, a test problem will be developed to ensure that in legacy mode a decomposed problem produces an equivalent solution to a single domain problem.
This problem will need to have multiple sections; the decomposition will occur at channel boundaries.
The test problem will be run in legacy mode to obtain a standard solution.
The results of the decomposed domain will be compared to that of the single domain to ensure that the solution was not affected.
The nonlinear solver in \cobra{} will then be likewise tested to ensure that the solution does not change with a decomposed domain.
Extensive testing of domain isolation will be necessary to test a representative subset of the various possible geometric configurations.

\section{Testing and Bench-marking}
\label{sect:proposal_temporal_testing}
Several problems with nonlinear phenomena should be constructed to test the temporal convergence criteria.
These problems will test the validity of the temporal-convergence metric in detecting when a timestep size solution may not be the solution to the discrete nonlinear problem.
Theoretical operation counts should be calculated for legacy mode and nonlinear mode.
Run time calculations for various problems should be calculated.
Convergence criteria, max iteration count, and globalization parameters should be varied for a set number of problems to determine performance.

\section{Timeline}
\label{sect:proposal_time_line}

\newcommand{\cc}{\cellcolor{black}}
\begin{table}[ht]
\singlespace
\centering
\begin{tabular}{@{}l l c c c c  c c c c c c @{}} \toprule
Task & \multicolumn{1}{r}{Month} & Jan & Feb & Mar & Apr & May & Jun & Jul & Aug & Sep & Oct\\
\midrule
\multicolumn{12}{l}{Scaling}  \\
& Implementation & \cc & \cc &     &     &     &     &     &     &     &     \\
& Testing        &     & \cc & \cc &     &     &     &     &     &     &     \\
\multicolumn{12}{l}{Domain Decomposition} \\
& Development    & \cc & \cc &     &     &     &     &     &     &     &     \\
& Implementation &     & \cc & \cc & \cc & \cc &     &     &     &     &     \\
& Testing        &     &     &     &     & \cc & \cc &     &     &     &     \\
\multicolumn{12}{l}{Temporal Convergence Criteria}\\
& Implementation & \cc & \cc &     &     &     &     &     &     &     &     \\
& Testing        &     &     & \cc & \cc &     &     &     &     &     &     \\
\multicolumn{12}{l}{Performance Evaluation} \\
& Testing        &     &     &     &     &     & \cc & \cc &     &     &     \\
\multicolumn{12}{l}{Parametric Studies} \\
& Testing        &     &     &     &     &     & \cc & \cc & \cc &     &     \\
\multicolumn{12}{l}{Dissertation} \\
& Writing        & \cc & \cc & \cc & \cc & \cc & \cc & \cc & \cc & \cc & \cc \\
\bottomrule  
\end{tabular}
\caption{Proposed research timeline}
\label{tab:time_line}
\end{table}

The proposed work will be done in blocks.
Where possible, objectives will be pursued in parallel.
Initial work will be to implement the software changes necessary to address issues with the current scaling implementation and add internal calculation of the temporal convergence criteria.
Parallel to those tasks, the mathematical formulation of the domain decomposition will be developed.
After the analytic framework for the domain decomposition has been developed, work on software changes necessary to isolate spatial components will begin.
During that time, testing of the temporal convergence criteria and the scaling factor will be completed.
Upon completion of the domain decomposition programming, testing of the domain decomposition algorithm will begin.
The final performance testing and parametric studies will be carried out in parallel.
\tab{tab:time_line} contains a proposed time line for this work.

\section{Possible Outcomes}
\label{sect:possible_outcomes}
Upon completion of this research, several possible conclusions will be available.
The first is that the current single-shot linearization method produces different solutions even with the localized nonlinearities resolved.
An alternative is that the current suite of single-shot software can be modified to resolve the localized nonlinearities, producing nonlinearly converged solutions at a reduced cost when compared to a full nonlinear solver.